<ion-header>
  <ion-toolbar class="menu">
    <ion-buttons slot="primary" class="botoes-container">
      <div class="botoes-esquerda">
        <ion-button slot="start" (click)="voltar()">
          <ion-icon class="iconesMenu" name="chevron-back-outline"></ion-icon>
        </ion-button>
      </div>
      <div class="botoes-direita">
        <ion-button (click)="deslogar()">
          <ion-icon class="iconesMenu" size="large" name="log-in-outline"></ion-icon>
        </ion-button>
      </div>
    </ion-buttons>
  </ion-toolbar>
  
</ion-header>

<div class="fundoAgendamento">
  <ion-button class="botao1" size="small" id="open-modalServicos" expand="block">{{ servicosText | uppercase }}</ion-button>

  <ion-modal #modalServicos trigger="open-modalServicos">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button slot="start" (click)="fecharModalServicos()"><ion-icon name="chevron-back-outline"></ion-icon></ion-button>
          </ion-buttons>
          <ion-title>Serviços</ion-title>
        </ion-toolbar>

        <ion-toolbar>
          <ion-searchbar (ionInput)="pesquisarServico($event)"></ion-searchbar>
        </ion-toolbar>
      </ion-header>

      <ion-content color="light" class="ion-padding">
        <ion-list id="modal-list" [inset]="true" *ngFor="let servico of servicosFiltrados">
          <ion-item (click)="selecionarServico(servico)">
            <ion-label>{{ getDescricaoServico(servico) }}</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-button class="botao1" size="small" id="open-modalProfissional" expand="block">{{ profissionalText | uppercase }}</ion-button>

  <ion-modal #modalProfissional trigger="open-modalProfissional" [initialBreakpoint]="0.5" [breakpoints]="[0.5, 0.75]">
    <ng-template>
      <ion-content>
        <ion-list *ngFor="let profissional of profissionais">
          <ion-item (click)="selecionarProfissional(profissional)">
            <ion-avatar slot="start">
              <ion-img [src]="obterConteudoFormatado(profissional.imagemPerfil)"></ion-img>
            </ion-avatar>
            <ion-label>{{ profissional.nome }}</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-button class="botao1" size="small" id="open-modalData" expand="block">{{ dataText | uppercase }}</ion-button>

  <ion-modal #modalData trigger="open-modalData" [initialBreakpoint]="0.5" [breakpoints]="[0.5, 0.75]">
    <ng-template>
      <div class="ion-padding" slot="content">
        <ion-datetime (ionChange)="selecionarData()" presentation="date" [(ngModel)]="dataSelecionada"></ion-datetime>
      </div>
    </ng-template>
  </ion-modal>

  <p-carousel [value]="horarios" [numVisible]="4" [numScroll]="4" *ngIf="horarios?.length! > 0; else horariosEmpty">
    <ng-template let-horario pTemplate="item">
      <div class="border-1 surface-border border-round m-2 text-center py-5 px-3">
        <div>
          <ion-button (click)="abrirModalResumo(horario)">{{ horario }}</ion-button>
        </div>
      </div>
    </ng-template>
  </p-carousel>

  <ng-template #horariosEmpty>
    <span *ngIf="dataSelecionada">Não possui horários disponíveis!</span>
  </ng-template>

  <ion-modal #modalResumo trigger="open-modalResumo" [initialBreakpoint]="0.5" [breakpoints]="[0.5, 0.75]">
    <ng-template>
      <ion-content class="ion-padding">
        Serviço: {{ reserva.servicos[0].descricao }}<br>
        Barbeiro: {{ reserva.funcionario.nome }}<br>
        Data e Hora: {{ reserva.dataHoraText }}<br>
        Total: {{ reserva.totalText }}<br>
        <ion-button class="ion-margin" shape="round" expand="full" (click)="confirmar()">Confirmar!</ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>
</div>
